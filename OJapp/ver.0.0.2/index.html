<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OJapp Builder</title>

<style>
body{
  margin:0;
  font-family: "Helvetica","Arial","YuGothic",sans-serif;
  background:#ffffff;
  color:#222;
}

.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:15px;
  border-bottom:1px solid #eee;
}

/* --- ğŸ”µãƒ­ã‚´ --- */
.logo{
  display:flex;
  align-items:center;
  font-size:22px;
  font-weight:bold;
  gap:6px;
}
.logo-icon{
  width:34px;height:34px;
  background:radial-gradient(circle at 30% 30%, #6dd4ff, #2bb7ff);
  border-radius:50%;
  position:relative;
}
.logo-icon::after{
  content:"";
  position:absolute;
  width:13px;height:13px;
  background:radial-gradient(circle at 30% 30%, #ffb0d8, #ff4fa9);
  border-radius:50%;
  top:9px;left:10px;
}

/* --- OCHAGã‚¹ã‚¤ãƒƒãƒ --- */
.switch{
  font-size:24px;
  cursor:pointer;
}

/* --- ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼ --- */
h2{
  text-align:center;
  margin-top:30px;
  font-weight:600;
}

/* --- ã·ã£ãã‚Šã‚°ãƒ­ã‚¹ãƒœã‚¿ãƒ³ --- */
.btn{
  display:inline-block;
  margin:25px auto;
  padding:18px 38px;
  background:linear-gradient(#ffd85a,#ffb726);
  border-radius:40px;
  font-weight:bold;
  font-size:20px;
  text-align:center;
  box-shadow:0 6px 0 #d19400;
  transition:0.2s;
  position:relative;
}
.btn::after{
  content:"";
  position:absolute;
  top:6px;left:50%;
  transform:translateX(-50%);
  width:70%;
  height:30%;
  border-radius:30px;
  background:rgba(255,255,255,0.55);
  filter:blur(2px);
}
.btn:hover{ transform:scale(1.06); }
.btn:active{ transform:scale(.97); box-shadow:0 3px 0 #a87500; }

.btn.pulse{ animation:pulse 2.4s infinite ease-in-out; }
@keyframes pulse{
  0%{transform:scale(1);}
  50%{transform:scale(1.04);}
  100%{transform:scale(1);}
}

.arrow{
  text-align:center;
  font-size:26px;
  animation:float 1.6s infinite ease-in-out;
}
@keyframes float{
  0%{transform:translateY(0);}
  50%{transform:translateY(8px);}
  100%{transform:translateY(0);}
}

.section{
  width:90%;
  max-width:500px;
  background:white;
  margin:18px auto;
  padding:20px;
  border-radius:18px;
  box-shadow:0 0 12px rgba(0,0,0,0.05);
}
.section-title{ font-size:18px; margin-bottom:10px; font-weight:bold; }

input[type=file],input[type=text]{
  width:100%;
  padding:13px;
  border-radius:12px;
  border:1px solid #ddd;
  font-size:16px;
  outline:none;
}
input:focus{ border-color:#66c8ff; }

.icon-box{
  width:160px;height:160px;
  background:#f5f5f5;
  border-radius:22px;
  margin:12px auto;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
  box-shadow:0 2px 8px rgba(0,0,0,0.06);
}
.icon-box img{
  width:100%;height:100%;object-fit:cover;
  border-radius:22px;
}

#assistantBox{
  position:fixed;bottom:20px;right:20px;
  background:white;
  border-radius:20px;
  border:2px solid #2bb7ff;
  padding:12px 18px;
  box-shadow:0 0 12px rgba(0,0,0,0.1);
  font-size:15px;
  display:none;
}
</style>
</head>
<body>

<div class="header">
 <div class="logo"><div class="logo-icon"></div>OJapp</div>
 <div class="switch" onclick="toggleA()">ğŸ˜†</div>
</div>

<h2>ãƒ›ãƒ¼ãƒ ã‚’å¤‰ãˆã‚‹ã€‚è‡ªåˆ†ã‚’å¤‰ãˆã‚‹ã€‚</h2>

<div style="text-align:center;">
 <button class="btn pulse" onclick="generate()">Create App ğŸ‰</button>
 <div class="arrow">â–¼</div>
</div>

<div class="section">
 <div class="section-title">Step1ï¼šã‚¢ã‚¤ã‚³ãƒ³ç”»åƒ</div>
 <input type="file" id="iconInput">
 <div class="icon-box"><img id="preview" src="" /></div>
</div>

<div class="section">
 <div class="section-title">Step2ï¼šã‚¢ãƒ—ãƒªå</div>
 <input type="text" id="appName" placeholder="OJACH PORTAL">
</div>

<div class="section">
 <div class="section-title">Step3ï¼šURL</div>
 <input type="text" id="appURL" placeholder="https://example.com">
</div>

<div id="assistantBox">ãŠã¡ã‚ƒã˜å‚ä¸ŠğŸ˜âœ¨</div>
<script>
function toggleA(){
 let box=document.getElementById("assistantBox");
 box.style.display=(box.style.display=="none")?"block":"none";
}
document.getElementById("iconInput").addEventListener("change",e=>{
 let f=e.target.files[0]; if(!f)return;
 document.getElementById("preview").src=URL.createObjectURL(f);
});
  /* ================================
   ğŸ“Œ ãƒšãƒ¼ã‚¸ç”Ÿæˆæ©Ÿèƒ½ï¼ˆã“ã“ã‹ã‚‰ï¼‰
================================ */
function generate(){
  const file = document.getElementById("iconInput").files[0];
  const name = document.getElementById("appName").value || "My App";
  const url  = document.getElementById("appURL").value;

  if(!url){
     alert("URLã‚’å…¥åŠ›ã—ã¦ã­ğŸ˜");
     return;
  }

  // ã‚¢ã‚¤ã‚³ãƒ³ã®èª­ã¿è¾¼ã¿
  const reader = new FileReader();
  reader.onload = function(e){
    const iconBase64 = e.target.result;

    // ğŸ”¥ ç”Ÿæˆã•ã‚Œã‚‹miniã‚¢ãƒ—ãƒªã®html
    const html = `
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>${name}</title>

<link rel="apple-touch-icon" href="${iconBase64}">
<link rel="manifest" href="manifest.json">

<style>
body{
  margin:0; display:flex; justify-content:center; align-items:center;
  height:100vh; background:#e6f6ff;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  flex-direction:column;
}

#logo{
  background:white; padding:22px 30px; border-radius:22px;
  font-size:30px; font-weight:bold; color:#ff69b4;
  box-shadow:0 4px 10px rgba(0,0,0,.25);
  animation:pulse 1.2s infinite;
  margin-bottom:20px;
}
@keyframes pulse{
  0%{transform:scale(1);}
  50%{transform:scale(1.07);}
  100%{transform:scale(1);}
}

#msg{margin-top:10px;opacity:.8;}
</style>
</head>
<body>

<div id="logo">${name}</div>
<div id="msg">â³ åˆå›ã ã‘30ç§’å¾Œã«è‡ªå‹•ã§ãƒšãƒ¼ã‚¸ã¸ç§»å‹•ã—ã¾ã™</div>
<div>ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã™ã‚‹ã¨ã‚¢ã‚¤ã‚³ãƒ³ã‚¢ãƒ—ãƒªåŒ–ã§ãã‚‹ã‚ˆğŸ“±</div>

<script>
let first = !localStorage.getItem("ojapp_first_${name}");
let time = first ? 30 : 3; // åˆå›ã®ã¿é•·ã

document.getElementById("msg").innerHTML = "â³ " + time + "ç§’å¾Œã«ç§»å‹• â†’ ${url}";

localStorage.setItem("ojapp_first_${name}",1);

let timer=setInterval(()=>{
  time--;
  document.getElementById("msg").innerHTML = "â³ " + time + "ç§’å¾Œã«ç§»å‹• â†’ ${url}";
  if(time<=0){
    clearInterval(timer);
    location.href="${url}";
  }
},1000);
</script>
</body>
</html>`;

    // ç”Ÿæˆã—ã¦é–‹ã
    const blob=new Blob([html],{type:"text/html"});
    window.open(URL.createObjectURL(blob),"_blank");
    alert("ç”Ÿæˆãƒšãƒ¼ã‚¸ãŒé–‹ã„ãŸã‚ˆï¼ãƒ›ãƒ¼ãƒ ã«è¿½åŠ ã—ã¦ã¿ã¦ğŸ”¥");
  };

  reader.readAsDataURL(file);
}
</script>
</body>
</html>
