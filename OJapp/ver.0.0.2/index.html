<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>OJapp Builder</title>
<style>
body{
  margin:0;
  font-family: "Helvetica","Arial","YuGothic",sans-serif;
  background:#ffffff;
  color:#222;
}
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:15px;
  border-bottom:1px solid #eee;
}
.logo{
  display:flex;
  align-items:center;
  font-size:22px;
  font-weight:bold;
  gap:6px;
}
.logo-icon{
  width:34px;height:34px;
  background:radial-gradient(circle at 30% 30%, #6dd4ff, #2bb7ff);
  border-radius:50%;
  position:relative;
}
.logo-icon::after{
  content:"";
  position:absolute;
  width:13px;height:13px;
  background:radial-gradient(circle at 30% 30%, #ffb0d8, #ff4fa9);
  border-radius:50%;
  top:9px;left:10px;
}

.switch{
  font-size:24px;
  cursor:pointer;
}
h2{
  text-align:center;
  margin-top:30px;
  font-weight:600;
}
.btn{
  display:inline-block;
  margin:25px auto;
  padding:18px 38px;
  background:linear-gradient(#ffd85a,#ffb726);
  border-radius:40px;
  font-weight:bold;
  font-size:20px;
  text-align:center;
  box-shadow:0 6px 0 #d19400;
  transition:0.2s;
  position:relative;
  cursor:pointer;
}
.btn::after{
  content:"";
  position:absolute;
  top:6px;left:50%;
  transform:translateX(-50%);
  width:70%;
  height:30%;
  border-radius:30px;
  background:rgba(255,255,255,0.55);
  filter:blur(2px);
}
.btn:hover{transform:scale(1.06);}
.btn:active{transform:scale(0.97);box-shadow:0 3px 0 #a87500;}

@keyframes pulse{50%{transform:scale(1.04);}}
.btn.pulse{animation:pulse 2.4s infinite ease-in-out;}
.arrow{text-align:center;font-size:26px;animation:float 1.6s infinite ease-in-out;}
@keyframes float{50%{transform:translateY(8px);}}

.section{
  width:90%;max-width:500px;background:white;margin:18px auto;padding:20px;
  border-radius:18px;box-shadow:0 0 12px rgba(0,0,0,0.05);
}
.section-title{font-size:18px;margin-bottom:10px;font-weight:bold;}

input[type=file],input[type=text]{
  width:100%;padding:13px;border-radius:12px;border:1px solid #ddd;
  font-size:16px;outline:none;
}
input:focus{border-color:#66c8ff;}

.icon-box{
  width:160px;height:160px;background:#f5f5f5;border-radius:22px;margin:12px auto;
  display:flex;justify-content:center;align-items:center;overflow:hidden;
  box-shadow:0 2px 8px rgba(0,0,0,0.06);
}
.icon-box img{width:100%;height:100%;object-fit:cover;border-radius:22px;}

#assistantBox{
  position:fixed;bottom:20px;right:20px;background:white;border-radius:20px;
  border:2px solid #2bb7ff;padding:12px 18px;box-shadow:0 0 12px rgba(0,0,0,0.1);
  font-size:15px;display:none;
}
</style>
</head>
<body>

<div class="header">
 <div class="logo"><div class="logo-icon"></div>OJapp</div>
 <div class="switch" onclick="toggleA()">ğŸ˜†</div>
</div>

<h2>ãƒ›ãƒ¼ãƒ ã‚’å¤‰ãˆã‚‹ã€‚è‡ªåˆ†ã‚’å¤‰ãˆã‚‹ã€‚</h2>

<div style="text-align:center;">
 <div class="btn pulse" onclick="generateApp()">Create App ğŸ‰</div>
 <div class="arrow">â–¼</div>
</div>

<!-- Step1 -->
<div class="section">
 <div class="section-title">Step1ï¼šã‚¢ã‚¤ã‚³ãƒ³ç”»åƒ</div>
 <input type="file" id="iconInput">
 <div class="icon-box"><img id="preview" src="" /></div>
</div>

<!-- Step2 -->
<div class="section">
 <div class="section-title">Step2ï¼šã‚¢ãƒ—ãƒªå</div>
 <input id="appName" type="text" placeholder="OJACH PORTAL">
</div>

<!-- Step3 -->
<div class="section">
 <div class="section-title">Step3ï¼šURL</div>
 <input id="targetURL" type="text" placeholder="https://example.com">
</div>

<div id="assistantBox">ãŠã¡ã‚ƒã˜å‚ä¸ŠğŸ˜âœ¨</div>

<script>
// ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆPOP
function toggleA(){
 let box=document.getElementById("assistantBox");
 box.style.display=(box.style.display=="none")?"block":"none";
}

// ç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
document.getElementById("iconInput").addEventListener("change",e=>{
 const file=e.target.files[0];
 if(file) document.getElementById("preview").src=URL.createObjectURL(file);
});

// ğŸ”¥ ãƒšãƒ¼ã‚¸ç”Ÿæˆæœ¬ä½“
function generateApp(){
 const file=document.getElementById("iconInput").files[0];
 const appName=document.getElementById("appName").value.trim();
 const targetURL=document.getElementById("targetURL").value.trim();

 if(!file||!appName||!targetURL) return alert("å…¨éƒ¨å…¥åŠ›ã—ã¦ã­ğŸ‘Œ");

 const reader=new FileReader();
 reader.onload=e=>{
  const base64=e.target.result;
  const html=`<!DOCTYPE html><html><head>
<title>${appName}</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="apple-touch-icon" href="${base64}">
<style>
body{margin:0;display:flex;justify-content:center;align-items:center;height:100vh;font-family:sans-serif;text-align:center;}
</style>
</head><body>
<h2>${appName}</h2>
<img src="${base64}" width="120" style="border-radius:20px;"><br><br>
<b>ãƒ›ãƒ¼ãƒ ã«è¿½åŠ æ¨å¥¨ğŸ”¥</b><br>è‡ªå‹•ã§ç§»å‹•ã—ã¾ã™<br><br>
<div id="count">åˆå›ã¯30ç§’ / ä»¥é™3ç§’</div>

<script>
let first=!localStorage.getItem("${appName}_installed");
let sec=first?30:3;
let timer=setInterval(()=>{
 document.getElementById('count').innerHTML="ç§»å‹•ã¾ã§ "+sec+" ç§’";
 sec--;
 if(sec<0){
  clearInterval(timer);
  localStorage.setItem("${appName}_installed",true);
  location.href="${targetURL}";
 }
},1000);
</script>
</body></html>`;

  const blob=new Blob([html],{type:"text/html"});
  window.open(URL.createObjectURL(blob),"_blank");
  alert("ç”Ÿæˆãƒšãƒ¼ã‚¸ãŒé–‹ã„ãŸã‚ˆï¼ãƒ›ãƒ¼ãƒ è¿½åŠ ã—ã¦ã¿ã¦ğŸ”¥");
 };
 reader.readAsDataURL(file);
}
</script>

</body>
</html>
