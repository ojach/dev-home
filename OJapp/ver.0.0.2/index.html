<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OJapp Builder</title>

<style>
body{
  margin:0;
  font-family: "Helvetica","Arial","YuGothic",sans-serif;
  background:#ffffff;
  color:#222;
}

.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:15px;
  border-bottom:1px solid #eee;
}

/* --- ãƒ­ã‚´ --- */
.logo{
  display:flex;
  align-items:center;
  font-size:22px;
  font-weight:bold;
  gap:6px;
}
.logo-icon{
  width:34px;height:34px;
  background:radial-gradient(circle at 30% 30%, #6dd4ff, #2bb7ff);
  border-radius:50%;
  position:relative;
}
.logo-icon::after{
  content:"";
  position:absolute;
  width:13px;height:13px;
  background:radial-gradient(circle at 30% 30%, #ffb0d8, #ff4fa9);
  border-radius:50%;
  top:9px;left:10px;
}

/* ãƒœã‚¿ãƒ³ */
.btn{
  display:inline-block;
  margin:25px auto;
  padding:18px 38px;
  background:linear-gradient(#ffd85a,#ffb726);
  border-radius:40px;
  font-weight:bold;
  font-size:20px;
  text-align:center;
  box-shadow:0 6px 0 #d19400;
  transition:0.2s;
  cursor:pointer;
}
.btn:hover{transform:scale(1.06);}

/* ã‚«ãƒ¼ãƒ‰ */
.section{
  width:90%;
  max-width:500px;
  background:white;
  margin:18px auto;
  padding:20px;
  border-radius:18px;
  box-shadow:0 0 12px rgba(0,0,0,0.05);
}
.section-title{font-size:18px;font-weight:bold;margin-bottom:10px;}

input{width:100%;padding:13px;border-radius:12px;border:1px solid #ddd;margin-top:5px;}

/* ã‚¢ã‚¤ã‚³ãƒ³æ  */
.icon-box{
  width:160px;height:160px;background:#f5f5f5;margin:12px auto;
  border-radius:22px;display:flex;justify-content:center;align-items:center;overflow:hidden;
}
.icon-box img{width:100%;height:100%;object-fit:cover;border-radius:22px;}
</style>
</head>

<body>
<div class="header">
 <div class="logo"><div class="logo-icon"></div>OJapp</div>
</div>

<h2 style="text-align:center;margin-top:30px;">ãƒ›ãƒ¼ãƒ ã‚’å¤‰ãˆã‚‹ã€‚è‡ªåˆ†ã‚’å¤‰ãˆã‚‹ã€‚</h2>

<div style="text-align:center;">
 <div class="btn" onclick="generate()">Create App ğŸ‰</div>
</div>

<div class="section">
 <div class="section-title">Step1ï¼šã‚¢ã‚¤ã‚³ãƒ³ç”»åƒ</div>
 <input type="file" id="iconInput">
 <div class="icon-box"><img id="preview"></div>
</div>

<div class="section">
 <div class="section-title">Step2ï¼šã‚¢ãƒ—ãƒªå</div>
 <input id="appName" type="text" placeholder="OJACH PORTAL">
</div>

<div class="section">
 <div class="section-title">Step3ï¼šURL</div>
 <input id="appURL" type="text" placeholder="https://example.com">
</div>


<script>
/* ç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ */
document.getElementById("iconInput").addEventListener("change",e=>{
  const file=e.target.files[0]; if(!file)return;
  document.getElementById("preview").src=URL.createObjectURL(file);
});


/* ğŸ”¥ ç”Ÿæˆæ©Ÿèƒ½ */
function generate(){
  const file=document.getElementById("iconInput").files[0];
  const name=document.getElementById("appName").value||"My App";
  const url=document.getElementById("appURL").value;
  if(!url){alert("URLå…¥åŠ›ã—ã¦ğŸ”¥");return;}

  const reader=new FileReader();
  reader.onload=function(e){
    const icon=e.target.result;

    const html = `<!DOCTYPE html>
<html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>${name}</title>
<link rel="apple-touch-icon" href="${icon}">
<style>
body{margin:0;display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;background:#e6f6ff;font-family:-apple-system;}
#logo{background:white;padding:22px 30px;border-radius:22px;font-size:30px;font-weight:bold;color:#ff69b4;box-shadow:0 4px 10px rgba(0,0,0,.25);}
</style></head>
<body>
<div id="logo">${name}</div>
<div id="msg">â³ åˆå›30ç§’ / 2å›ç›®ä»¥é™3ç§’ã§ç§»å‹•</div>
<script>
let first=!localStorage.getItem("ojapp_${name}");
let t=first?30:3;
localStorage.setItem("ojapp_${name}",1);
let timer=setInterval(()=>{
 t--;document.getElementById("msg").textContent="â³ "+t+"ç§’å¾Œã«ç§»å‹• â†’ ${url}";
 if(t<=0){clearInterval(timer);location.href="${url}";}
},1000);
<\/script>
</body></html>`;

    const blob=new Blob([html],{type:"text/html"});
    window.open(URL.createObjectURL(blob),"_blank");
    alert("ç”Ÿæˆãƒšãƒ¼ã‚¸ãŒé–‹ã„ãŸã‚ˆï¼ãƒ›ãƒ¼ãƒ ã«è¿½åŠ ã—ã¦ä½¿ã£ã¦ğŸ”¥");
  };
  reader.readAsDataURL(file);
}
</script>

</body>
</html>
